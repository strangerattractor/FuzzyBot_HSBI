HSBI – Hochschule Bielefeld (University of Applied Sciences and Arts)
Young Researchers Cloud and Edge Computing Platform for AI (yourAI)
Benutzerhandbuch yourAI-Cluster
Kontakt: yourAI@hsbi.de
Stand: 09. August 2024

====================================================================
0) Hinweis zur Erstellung dieses Textfiles
====================================================================
Dieses Textfile ist eine best-effort-Übertragung (Plain-Text) aus dem PDF „YourAI_Manual.pdf“.
Da der PDF-Text nicht maschinell extrahierbar war, basiert diese Fassung auf dem sichtbaren Inhalt
der Seiten (inkl. Abbildungen/Screenshots). Einige Kapitel sind im Inhaltsverzeichnis gelistet,
aber im vorliegenden Scan/Export nicht vollständig enthalten (siehe Abschnitt „Offen im PDF“).

====================================================================
1) Testphase des yourAI-Clusters (Kap. 1)
====================================================================
Im Rahmen der Testphase des yourAI-Clusters der Hochschule Bielefeld sollen Funktionalität und
Systemstabilität getestet werden. Während der Testphase wird das Cluster kontinuierlich optimiert
und mit zusätzlichen Funktionen erweitert.

Wenn Sie auf technische Probleme stoßen, teilen Sie diese gerne per E‑Mail mit (yourAI@hsbi.de).

Zusätzlich sind Workflows für den yourAI‑Cluster gefragt, z.B.:
- nodeübergreifende MPI‑Jobs über den Job‑Composer
- Multi‑GPU‑Nutzung
… sowie Workflows aus der Lehre oder zur Beantwortung von Forschungsfragen.

====================================================================
2) FAQs (Kap. 2)
====================================================================
In diesem Kapitel werden die wichtigsten Fragen zum yourAI‑Cluster beantwortet.
Falls Ihre Frage nicht aufgelistet ist, melden Sie sich bitte per E‑Mail. Wir werden das Dokument
mit Ihrer Fragestellung versuchen zu erweitern.

--------------------------------------------------------------------
2.1 Wie kann ich an der Testphase des yourAI‑Clusters teilnehmen?
--------------------------------------------------------------------
Während der Testphase wird einem ausgewählten Nutzerkreis Zugriff auf den yourAI‑Cluster gewährt.
Schreiben Sie dazu eine E‑Mail an yourAI@hsbi.de mit Ihrem HSBI‑Kürzel und einer kurzen
Nutzungs‑Begründung.

--------------------------------------------------------------------
2.2 Wie kann ich auf den yourAI‑Cluster per Browser oder SSH zugreifen?
--------------------------------------------------------------------
Voraussetzung:
- Sie müssen im VPN der HSBI angemeldet sein.

Browser-Zugriff:
- Web-Frontend: https://usr.yai.hsbi.de
- Beim ersten Besuch erscheint i.d.R. ein Browser‑Warning wegen eines selbst-signierten Zertifikats.
  Das liegt daran, dass das Zertifikat (noch) nicht offiziell ausgestellt ist. Es wird an einer
  offiziellen Zertifikatslösung gearbeitet. Nach dem Akzeptieren werden Sie auf die zentrale
  Login‑Internetseite der Hochschule Bielefeld weitergeleitet und können sich mit Ihren
  WebWunchnen‑Anmeldedaten anmelden.

SSH-Zugriff (Login‑Node):
Neben dem Web‑Frontend stellt der yourAI‑Cluster einen SSH‑Login‑Node für die Nutzung zur Verfügung
(usr.yai.hsbi.de). Auf diesen Node können Sie sich z.B. mit einem SSH‑Key verbinden.
SSH‑Keys können Sie selbst erstellen und anschließend in die Datei /home/$USER/.ssh/authorized_keys
kopieren bzw. dort registrieren.

Beispielablauf (aus dem Handbuch):
1) Auf dem persönlichen Arbeitsrechner SSH‑Key‑Pair erstellen:
   ssh-keygen -t ed25519 -a 100

2) Public Key (Endung .pub) mit einem Texteditor öffnen und den Inhalt kopieren.

3) Im Web‑Frontend den kopierten Public Key speichern:
   Files App → Home Directory (Home) → „Show dotfiles“ aktivieren → .ssh → authorized_keys
   Dort bearbeiten („Edit“) und den Key als neue Zeile hinzufügen.
   (Tipp aus dem Handbuch: In der Files‑Ansicht über die drei Punkte neben dem Namen die Datei
   „authorized_keys“ auswählen → Edit → Key einfügen → Speichern)

4) SSH‑Verbindung vom Arbeitsrechner zum Login‑Node:
   ssh <HSBI-Kürzel>@usr.yai.hsbi.de -i <path_to_your_private_key>

[Abbildung 1 – Beschreibung]
Seite 3 (Abbildung 1): Screenshot der Files‑App im Browser. Gezeigt ist der Pfad
/home/$USER/.ssh/ mit der Datei „authorized_keys“. Im UI sieht man eine Dateiliste
und die typische „…“ (Drei-Punkte)-Menüaktion zum Bearbeiten/Öffnen der Datei.

--------------------------------------------------------------------
2.3 Welche Funktionen stellt der yourAI‑Cluster zur Verfügung?
--------------------------------------------------------------------
2.3.1 Files App
- Webbasierter Dateiexplorer.
- Erlaubt, remote mit Dateien auf dem Cluster zu interagieren.
- Dateien und Ordner können hoch- oder heruntergeladen werden.
- Auf der Startseite erreichbar über „App Home Directory“ bzw. Navigation:
  Files → Home Directory

2.3.2 File Editor App
- Webbasierter Dateieditor.
- Erlaubt, remote Dateien auf dem yourAI‑Cluster zu editieren.
- Eine Datei öffnet man typischerweise über die Files App: drei Punkte → „Edit“.

2.3.3 Shell App
- Webbasiertes Terminal.
- Verbindet sich per SSH mit dem Login‑Node des yourAI‑Clusters (usr.yai.hsbi.de).
- Auf der Startseite erreichbar über:
  Clusters → <Cluster Name> → Shell Access

2.3.4 Slurm
- yourAI stellt Rechenressourcen über den Slurm Workload Manager bereit.
- Slurm ist ein Open‑Source Cluster‑Management‑/Job‑Scheduling‑System.
- Nutzer können Jobs anlegen, Ressourcen (CPU‑Zeit, GPU‑Zeit, bestimmte Knoten) reservieren,
  Jobs überwachen, Warteschlangen verwalten, Priorität ändern, Jobs stoppen/abbrechen etc.
- Ziel: effiziente Nutzung der Cluster‑Ressourcen für wissenschaftliche / studentische Projekte.

Weiterführende Links (im Handbuch nur als Liste genannt):
- YouTube: Introduction to the Slurm Workload Manager
- YouTube: Slurm Job Scheduler Basics
- Offizielle Slurm Dokumentation – User Quick Start
- FZ Jülich – JUWELS User Documentation: Batch System

2.3.5 Job Composer App
- Webtool zum Erstellen und Managen von Slurm‑Batch‑Jobs.
- Bietet Templates (Job‑Verzeichnisse).
- Typischer Workflow:
  1) Kopieren eines Verzeichnisses eines früheren Jobs oder eines Jobs von einem Gruppenmitglied
  2) Modifikationen an Eingabedateien
  3) Submit des neuen Jobs
- Integriert: Files App, File Editor App, Shell App.
- Navigation: Jobs → Job Composer

2.3.6 Active Jobs App
- Webbasierte Übersicht über alle verfügbaren Slurm‑Jobs.
- Erlaubt detaillierte Informationen zum eigenen Slurm‑Job.
- Navigation: Jobs → Active Jobs

2.3.7 Jupyter App
- Jupyter (Community‑Projekt) für interaktives Rechnen, Programmierung, Notebooks/JupyterLab.
- yourAI startet Jupyter typischerweise über einen interaktiven Slurm‑Job.
- Im Jupyter‑Submit‑Formular wählen Sie Ressourcen aus, dann „Launch“.
- Danach sehen Sie eine „My Interactive Sessions“-Übersicht und können via „Connect to Jupyter“
  den laufenden Jupyter‑Server öffnen.

Wichtige Implementationsdetails (aus dem Handbuch):
- Der Jupyter‑Server basiert auf Python/Web‑Technologien (HTML/CSS/JS).
- Um unterschiedliche Python‑Environments/Sprachen über Jupyter zu nutzen, werden „Kernel“ verwendet.
- Standardmäßig existiert eine Miniconda‑Python‑Base‑Installation im Home‑Verzeichnis jedes Users
  (z.B. /home/$USER/miniconda3).
- Das Base‑Environment enthält Miniconda‑Abhängigkeiten und Jupyter.
- Für eigene Environments müssen i.d.R. zusätzlich ipykernel (Python) bzw. IRkernel (R) etc. installiert
  und registriert werden.

[Abbildung 2 – Beschreibung]
Seite 7 (Abbildung 2): Screenshot des Jupyter‑Startformulars im Browser. Man sieht Felder/Optionen
für Environment Setup, Partition, Jupyter Mode (Notebook/Lab), Anzahl Ressourcen (Nodes/CPUs/RAM),
und einen „Launch“-Button.

[Abbildung 3 – Beschreibung]
Seite 8 (Abbildung 3): Screenshot „My Interactive Sessions“ mit einem laufenden Jupyter‑Job
(Status/Time Remaining) und einem Button „Connect to Jupyter“, um den Server zu öffnen.

--------------------------------------------------------------------
2.4 Linux
--------------------------------------------------------------------
2.4.1 Ich habe keine bzw. nur geringe Erfahrungen in der Nutzung von Linux.
     Wo finde ich eine gute Einführung?
- yourAI nutzt auf allen Servern die Linux‑Distribution CentOS Stream 9.
- Grundlegendes Terminal‑Wissen ist hilfreich und nötig.
- Das Handbuch empfiehlt „Linux Journey“ (Kapitel):
  * Chapter 1: Introduction to Linux Families
  * Chapter 2: Linux Philosophy and Concepts
  * Chapter 3: Linux Basics and System Startup
  * Chapter 7: Command Line Operations (everything except things with sudo permission)
  * Chapter 8: Finding Linux Documentation (everything except things with sudo permission)
  * Chapter 9: Processes (everything except things with sudo permission)
  * Chapter 10: File Operations (everything except things with sudo permission)
  * Chapter 11: Text Editors (everything except things with sudo permission)
  * Chapter 12: User Environment (everything except things with sudo permission)
  * Chapter 13: Manipulating Text (everything except things with sudo permission)

--------------------------------------------------------------------
2.5 Datenmanagement
--------------------------------------------------------------------
2.5.1 Wie kann ich Dateien und Ordner hoch- oder runterladen?
- Nutzen Sie am besten Upload-/Download-Funktion der Files App.
- Da in jedem System im Cluster ein Home-Verzeichnis eingebunden ist, können Sie Dateien auch
  auf dem Login‑Node oder im Jupyter‑Notebook/JupyterLab hochladen (Upload‑Button).
- Einschränkung laut Handbuch (Stand 06/2024): nur einzelne Dateien hochladen (kein Ordner‑Upload).

[Abbildung 4 – Beschreibung]
Seite 9 (Abbildung 4): Screenshot der Files‑App‑Oberfläche. Toolbar mit Buttons wie Upload/Download,
Copy/Paste, Navigation (Home Directory), Dateiliste im Tabellenlayout, optional „Show dotfiles“.

2.5.2 Ich habe aus Versehen Daten gelöscht. Kann ich die Daten wiederherstellen?
- yourAI nutzt ein Ceph File System (CephFS).
- CephFS unterstützt Snapshots. Für Home-Verzeichnisse ist Snapshot‑Scheduling aktiv:
  Tabelle 1 (CephFS Snapshot Scheduling):
    - schedule 1h: zu jeder vollen Stunde wird ein Snapshot erstellt
    - retention 24h: es werden 24 Snapshots mit einer Stunde Differenz erhalten
    - retention 7d: es werden 7 Snapshots mit einem Tag Differenz erhalten
- Zugriff auf Snapshots erfolgt über ein verstecktes Verzeichnis „.snap/“ auf jeder Verzeichnisebene.
- Dieses Verzeichnis ist versteckt und wird nicht per Files App oder „ls -a“ angezeigt.
- In der Files‑App gelangt man dennoch hinein über „Change directory“ und manuelles Hinzufügen von
  „/.snap/“ (siehe Abbildung 5).

Wiederherstellungs-Workflow (aus dem Handbuch, sinngemäß):
- Öffnen Sie „/.snap/“ und wählen Sie die Snapshot‑Version (Datum/Zeit) des gewünschten Ordners.
- Navigieren Sie zum wiederherzustellenden File/Folder.
- Nutzen Sie „Copy/Move“: danach öffnet sich ein Dialog, in dem Sie das Zielverzeichnis wählen.
- Wählen Sie ein „normales“ Zielverzeichnis (nicht .snap) und schließen Sie mit „Copy“ ab.
- Hinweis: „Move“ führt typischerweise zu Fehlern, weil Snapshot‑Verzeichnisse read‑only sind.

[Abbildung 5 – Beschreibung]
Seite 10 (Abbildung 5): Files‑App „Change Directory“-Dialog. In das Pfadfeld wird /home/.../.snap
eingetragen, um in die Snapshot‑Ordner zu wechseln.

[Abbildung 6 – Beschreibung]
Seite 11 (Abbildung 6): Screenshot einer Snapshot‑Ordneransicht in der Files‑App. Gezeigt ist
das Wiederherstellen durch Kopieren aus einem Snapshot‑Verzeichnis zurück in ein normales Verzeichnis.

2.5.3 Wie kann ich die Disk‑Quota meines Home‑Verzeichnisses einsehen?
- Aktuell kann die Disk‑Quota eines Verzeichnisses nur per Terminal abgefragt werden.
- Folgende Skripte stehen auf allen Systemen zur Verfügung (z.B. per Shell App):
  * quota_ceph.max Arg1      → maximale Disk‑Quota von Verzeichnis Arg1
  * quota_ceph.used Arg1     → belegter Speicher von Verzeichnis Arg1
  * quota_ceph.free Arg1     → noch verfügbarer Speicher von Verzeichnis Arg1
  * quota_ceph.overview Arg1 → max/used/free Übersicht für Verzeichnis Arg1

- Ihr Home‑Verzeichnis ist Teil des Wurzelverzeichnisses eines CephFS‑Volumes.
- Praktisch: Environment‑Variable $HOME als Argument nutzen.

[Abbildung 7 – Beschreibung]
Seite 11 (Abbildung 7): Terminal‑Screenshot, der die Ausgabe der quota_ceph.*‑Skripte zeigt
(Übersicht zu max/used/free).

--------------------------------------------------------------------
2.6 Python
--------------------------------------------------------------------
2.6.1 Wie kann ich ein Python‑Environment erstellen?
- Standardmäßig ist pro User Miniconda im Home installiert (Miniconda Base‑Env).
- Hinweis im Handbuch: Nur der Login‑Node (usr.yai.hsbi.de) hat Internetzugriff und kann neue Pakete
  installieren.
- Vorgehen (aus dem Handbuch):
  1) Shell App öffnen und Verbindung zum Login‑Node herstellen
  2) Miniconda‑Base aktivieren / Module laden:
     module load miniconda3
  3) Environment mit empfohlenen minimalen Paketen erstellen:
     conda create -n <env> python=3.11 conda pip ipykernel
  4) Environment aktivieren:
     conda activate <env>
  5) ipykernel registrieren:
     python -m ipykernel install --user --name <env> --display-name "<env>"
  6) Optional: weitere Pakete installieren (pip/conda)

2.6.2 Wie kann ich mein neu erstelltes Environment über die Jupyter App per Kernel nutzen?
- Die Jupyter App startet standardmäßig im Miniconda3‑Base‑Environment.
- Im Jupyter‑Notebook/Lab kann man den Kernel wechseln:
  - Im Menü/Kernel‑Dropdown nach dem Display‑Name suchen, den Sie bei ipykernel install vergeben haben
  - Kernel auswählen → Notebook nutzt das neue Environment

[Abbildung 8 – Beschreibung]
Seite 13 (Abbildung 8): Screenshot einer Jupyter‑Oberfläche (Notebook/Lab), die den aktuell
gewählten Standard‑Kernel zeigt und eine Option „Switch kernel“ / Kernel‑Menü.

[Abbildung 9 – Beschreibung]
Seite 13 (Abbildung 9): Screenshot des Kernel‑Auswahl‑Dropdowns (Liste verfügbarer Kernel).

[Abbildung 10 – Beschreibung]
Seite 14 (Abbildung 10): Screenshot eines Notebooks, in dem oben/rechts der neu gewählte Kernel
(= das neue Environment) sichtbar ist.

2.6.3 Wie kann ich die Jupyter‑App mit einem Environment meiner Wahl starten?
- Wenn Sie ein neues Environment erstellt haben, müssen Sie in diesem Environment Jupyter installieren.
- Dann muss der Jupyter‑App mitgeteilt werden, dass dieses Environment genutzt werden soll.
- Vorgehen (aus dem Handbuch, sinngemäß):
  1) Hinweis: Nur Login‑Node hat Internetzugriff
  2) Shell App → Login‑Node
  3) Base aktivieren / Module laden:
     module load miniconda3
  4) Gewünschtes Environment aktivieren:
     conda activate <env-name>
  5) Jupyter aus conda-forge installieren:
     conda install jupyter -c conda-forge
  6) In der Jupyter‑App im Feld „Environment Setup“ die passenden Zeilen eintragen, z.B.:
     module load miniconda3
     conda activate <env-name>
  7) Ressourcen auswählen und Job mit „Launch“ starten.

--------------------------------------------------------------------
2.7 R
--------------------------------------------------------------------
2.7.1 Wie kann ich ein R‑Environment erstellen?
- Miniconda ist vorhanden, und R kann über conda installiert werden.
- Hinweis: nur Login‑Node hat Internetzugriff.
- Vorgehen (aus dem Handbuch):
  1) Shell App → Login‑Node
  2) module load miniconda3
  3) Environment erstellen (mit IRkernel‑Basis):
     conda create -n <env-name> --base r-irkernel
  4) Aktivieren:
     conda activate <env>
  5) Kernel registrieren:
     Rscript -e "IRkernel::installspec(name = '<env-name>', displayname = '<env-name>')"
  6) Optional Pakete installieren, z.B.:
     Rscript -e "install.packages('readr', repos='http://cran.us.r-project.org')"

2.7.2 Wie kann ich mein neu erstelltes Environment über die Jupyter App per Kernel nutzen?
- Analog zu Python: In Jupyter den Kernel wechseln und den neuen R‑Kernel auswählen.

[Abbildung 11 – Beschreibung]
Seite 16 (Abbildung 11): Jupyter‑UI Screenshot, Standard‑Kernel‑Anzeige (R‑Kontext).

[Abbildung 12 – Beschreibung]
Seite 16 (Abbildung 12): Kernel‑Auswahl‑Dropdown, in dem der gewünschte R‑Kernel auswählbar ist.

[Abbildung 13 – Beschreibung]
Seite 17 (Abbildung 13): Notebook‑Screenshot, in dem der neu ausgewählte Environment‑Kernel angezeigt wird.

--------------------------------------------------------------------
2.8 C++
--------------------------------------------------------------------
2.8.1 Wie kann ich C++ interaktiv in der Jupyter App nutzen?
- Es gibt verschiedene Kernel für Jupyter und die Sprache C++.
- Im Handbuch wird „xeus‑cling“ erwähnt (C++‑Kernel).
- Vorgehen (aus dem Handbuch, sinngemäß; Seite 17):
  1) Hinweis: Nur Login‑Node hat Internetzugriff
  2) Shell App → Login‑Node
  3) module load miniconda3
  4) Environment erstellen (minimal):
     conda create -n <env-name> python conda pip
  5) Environment aktivieren:
     conda activate <env-name>
  6) xeus-cling installieren:
     conda install -c conda-forge xeus-cling
  (Danach sollte der Kernel in Jupyter verfügbar sein; ggf. Kernel-Liste prüfen und auswählen.)

====================================================================
3) Offen im PDF / nicht vollständig sichtbar
====================================================================
Das Inhaltsverzeichnis listet weitere Abschnitte (u.a. 2.9 Slurm / 2.10 HPC / 2.11 LMOD sowie
Kapitel 3 „Bekannte Probleme“). Diese Inhalte waren im vorliegenden gerenderten Seitenmaterial
nicht vollständig enthalten bzw. nicht sichtbar. Falls Sie die restlichen Seiten als bessere
PDF-Version (mit extrahierbarem Text) haben, kann ich eine vollständigere Textversion erstellen.

====================================================================
Ende
====================================================================
